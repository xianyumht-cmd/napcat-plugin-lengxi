{{extend commonLayout}}

{{block 'css'}}
<link rel="stylesheet" type="text/css" href="{{_res_path}}Template/healthInfo/healthInfo.css"/>
{{/block}}

{{block 'main'}}
<div class="container">
    <!-- 背景图片 -->
    <img class="bg-image" src="{{_res_path}}imgs/others/loading13.png" alt="" />
    
    <!-- 头部区域 -->
    <div class="header">
        <div class="header-left">
            <img class="game-logo" src="{{_res_path}}imgs/others/logo.png" alt="三角洲行动" />
        </div>
        <div class="header-center">
            <div class="title">健康状态信息</div>
        </div>
    </div>

    <div class="content">
            <div class="content-layout">
                <!-- 左侧：负面状态 -->
                {{if deBuffList && deBuffList.length > 0}}
                <div class="left-section">
                    <div class="section-title debuff-title">负面状态</div>
                    <div class="section-content">
                        <div class="status-list">
                            {{each deBuffList areaGroup}}
                            {{if areaGroup.isMerged}}
                            <!-- 合并的卡片：同一部位的两个状态 -->
                            <div class="status-card debuff-card merged-card">
                                <div class="area-badge">{{areaGroup.area || '未知部位'}}</div>
                                <div class="merged-status-container">
                                    {{each areaGroup.list status}}
                                    <div class="merged-status-item">
                                        <div class="status-header">
                                            {{if status.pic}}
                                            <div class="status-icon-wrapper">
                                                <img class="status-icon" src="{{status.pic}}" alt="{{status.title || status.status || '未知状态'}}" onerror="this.style.display='none';" />
                                            </div>
                                            {{/if}}
                                            <div class="status-name">{{status.title || status.status || '未知状态'}}</div>
                                        </div>
                                        {{if status.trigger}}
                                        <div class="status-info">
                                            <span class="info-label">触发：</span>
                                            <span class="info-value">{{status.trigger}}</span>
                                        </div>
                                        {{/if}}
                                        {{if status.effect}}
                                        <div class="status-info">
                                            <span class="info-label">效果：</span>
                                            <span class="info-value">{{status.effect}}</span>
                                        </div>
                                        {{/if}}
                                    </div>
                                    {{if !$last}}
                                    <div class="merged-divider"></div>
                                    {{/if}}
                                    {{/each}}
                                </div>
                            </div>
                            {{else}}
                            <!-- 单个状态卡片 -->
                            {{each areaGroup.list status}}
                            <div class="status-card debuff-card">
                                <div class="area-badge">{{areaGroup.area || '未知部位'}}</div>
                                <div class="status-header">
                                    {{if status.pic}}
                                    <div class="status-icon-wrapper">
                                        <img class="status-icon" src="{{status.pic}}" alt="{{status.title || status.status || '未知状态'}}" onerror="this.style.display='none';" />
                                    </div>
                                    {{/if}}
                                    <div class="status-name">{{status.title || status.status || '未知状态'}}</div>
                                </div>
                                {{if status.trigger}}
                                <div class="status-info">
                                    <span class="info-label">触发：</span>
                                    <span class="info-value">{{status.trigger}}</span>
                                </div>
                                {{/if}}
                                {{if status.effect}}
                                <div class="status-info">
                                    <span class="info-label">效果：</span>
                                    <span class="info-value">{{status.effect}}</span>
                                </div>
                                {{/if}}
                            </div>
                            {{/each}}
                            {{/if}}
                            {{/each}}
                        </div>
                    </div>
                </div>
                {{/if}}

                <!-- 右侧：增益状态 -->
                {{if buffList && buffList.length > 0}}
                <div class="right-section">
                    <div class="section-title buff-title">增益状态</div>
                    <div class="section-content">
                        <div class="status-list">
                            {{each buffList buffGroup}}
                            {{each buffGroup.list buff}}
                            <div class="status-card buff-card">
                                <div class="status-header">
                                    {{if buff.pic}}
                                    <div class="status-icon-wrapper">
                                        <img class="status-icon" src="{{buff.pic}}" alt="{{buff.title || '未知增益'}}" onerror="this.style.display='none';" />
                                    </div>
                                    {{/if}}
                                    <div class="status-name">{{buff.title || '未知增益'}}</div>
                                </div>
                                {{if buff.effect}}
                                <div class="status-info">
                                    <span class="info-label">效果：</span>
                                    <span class="info-value">{{buff.effect}}</span>
                                </div>
                                {{/if}}
                            </div>
                            {{/each}}
                            {{/each}}
                        </div>
                    </div>
                </div>
                {{/if}}
            </div>
        </div>
    </div>
</div>
{{/block}}
