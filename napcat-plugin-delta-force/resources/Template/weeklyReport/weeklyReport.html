{{extend commonLayout}}
{{block 'css'}}
<link rel="stylesheet" type="text/css" href="{{_res_path}}Template/weeklyReport/weeklyReport.css"/>
{{/block}}
{{block 'main'}}
<div class="container">
    <!-- 背景装饰层 -->
    <div class="bg-grid"></div>
    
    <!-- 头部区域 -->
    <div class="header">
        <div class="header-left">
            <div class="logo-box">
                <img src="{{_res_path}}imgs/others/logo.png" alt="Logo" />
            </div>
        </div>
        <div class="header-right">
            <div class="user-info">
                <div class="user-name-row">
                    <div class="user-name">{{userName}}</div>
                </div>
                {{if date}}
                <div class="report-date">周报日期: {{date.slice(0, 4)}}-{{date.slice(4, 6)}}-{{date.slice(6, 8)}}</div>
                {{/if}}
            </div>
            <div class="avatar-wrapper">
                <img src="{{userAvatar}}" alt="Avatar" data-qq-avatar="{{qqAvatarUrl}}" onerror="if(this.dataset.qqAvatar){this.src=this.dataset.qqAvatar;this.onerror=null;}" />
            </div>
        </div>
    </div>

    {{if solData && !solData.isEmpty}}
    <!-- 烽火地带数据看板 -->
    <div class="dashboard-section">
        <div class="dashboard-grid">
            <div class="data-node highlight">
                <div class="node-label">总对局 / TOTAL MATCHES</div>
                <span class="node-value large">{{solData.total_sol_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">撤离 / EVACUATED</div>
                <span class="node-value large">{{solData.total_exacuation_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">百万撤离 / MILLION+ EVAC</div>
                <span class="node-value large">{{solData.GainedPrice_overmillion_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">死亡 / ELIMINATED</div>
                <span class="node-value large">{{solData.total_Death_Count || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">玩家击杀 / PLAYER KILLS</div>
                <span class="node-value">{{solData.total_Kill_Player || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">AI击杀 / AI KILLS</div>
                <span class="node-value">{{solData.total_Kill_AI || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">BOSS击杀 / BOSS KILLS</div>
                <span class="node-value">{{solData.total_Kill_Boss || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">段位 / RANK</div>
                <div class="rank-display">
                    {{if solData.rankImagePath}}
                    <img src="{{_res_path}}{{solData.rankImagePath}}" class="rank-img" alt="{{solData.rankName}}" onerror="this.style.display='none';" />
                    {{/if}}
                    <span class="node-value">{{solData.rankName || '-'}}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 资产趋势 -->
    {{if solData.assetTrend}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 资产趋势 / ASSET TREND
        </div>
        <div class="chart-container">
            <div class="line-chart-wrapper">
                <svg class="line-chart-svg" viewBox="0 0 {{solData.assetTrend.chartWidth}} {{solData.assetTrend.chartHeight}}" preserveAspectRatio="xMidYMid meet">
                    <path class="line-chart-path" d="{{solData.assetTrend.pathData}}" 
                          fill="none" stroke="#0FF796" stroke-width="3" 
                          stroke-linecap="round" stroke-linejoin="round"/>
                    {{each solData.assetTrend.allDays point}}
                    <g class="line-chart-point-group">
                        <circle class="line-chart-point" cx="{{point.x}}" cy="{{point.y}}" 
                                r="5" fill="#0FF796" stroke="#0a0a0a" stroke-width="2"/>
                        <text class="line-chart-value-text" x="{{point.x}}" y="{{point.y}}" 
                              text-anchor="middle" dy="-18" 
                              font-size="14" font-weight="800" 
                              font-family="Arial, sans-serif" dominant-baseline="middle">
                            {{point.price}}
                        </text>
                    </g>
                    {{/each}}
                </svg>
                <div class="line-chart-labels">
                    {{each solData.assetTrend.allDays point}}
                    <div class="line-chart-label-item" style="left: {{point.xPercent}}%">
                        <span class="line-chart-label">{{point.dayName}}</span>
                    </div>
                    {{/each}}
                </div>
            </div>
            <div class="chart-summary">
                <span class="chart-summary-text">{{solData.assetTrend.startPrice}} ➔ {{solData.assetTrend.endPrice}}</span>
            </div>
        </div>
    </div>
    {{/if}}

    <!-- 资产统计 -->
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 资产统计 / ASSET STATISTICS
        </div>
        <div class="dashboard-grid asset-grid">
            <div class="data-node highlight asset-card">
                <div class="node-label">资产净增 / NET INCREASE</div>
                <span class="node-value large">{{solData.rise_Price || 0}}</span>
                <div class="node-detail">(总收益 {{solData.Gained_Price || 0}} / 总消费 {{solData.consume_Price || 0}})</div>
            </div>
            {{if solData.profitRatio}}
            <div class="data-node highlight asset-card">
                <div class="node-label">赚损比 / PROFIT RATIO</div>
                <span class="node-value large">{{solData.profitRatio}}</span>
                <div class="node-detail">(收益/消费)</div>
            </div>
            {{/if}}
        </div>
    </div>

    <!-- 游戏行为 -->
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 游戏行为 / GAME ACTIONS
        </div>
        <div class="dashboard-grid">
            <div class="data-node highlight">
                <div class="node-label">任务 / QUESTS</div>
                <span class="node-value large">{{solData.total_Quest_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">使用钥匙 / KEYS USED</div>
                <span class="node-value large">{{solData.use_Keycard_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">破译 / DECRYPTIONS</div>
                <span class="node-value large">{{solData.Mandel_brick_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">里程 / MILEAGE</div>
                <span class="node-value highlight-green">{{solData.mileage || 0}}km</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">救援 / RESCUES</div>
                <span class="node-value large">{{solData.total_Rescue_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">游戏时长 / GAME TIME</div>
                <span class="node-value highlight-green">{{solData.gameTime || '-'}}</span>
            </div>
        </div>
    </div>

    <!-- 常玩内容 -->
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 常玩内容 / FAVORITE CONTENT
        </div>
        <div class="favorite-grid">
            {{if solData.mostUsedMapImagePath}}
            <div class="favorite-card">
                <div class="favorite-bg" style="background-image: url('{{_res_path}}{{solData.mostUsedMapImagePath}}');"></div>
                <div class="favorite-content">
                    <div class="favorite-label">常玩地图 / FAVORITE MAP</div>
                </div>
            </div>
            {{/if}}
            {{if solData.mostUsedOperatorImagePath}}
            <div class="favorite-card">
                <div class="favorite-bg" style="background-image: url('{{_res_path}}{{solData.mostUsedOperatorImagePath}}');"></div>
                <div class="favorite-content">
                    <div class="favorite-label">常玩干员 / FAVORITE OPERATOR</div>
                </div>
            </div>
            {{/if}}
        </div>
    </div>

    <!-- 高价值物资 -->
    {{if solData.highPriceItems && solData.highPriceItems.length > 0}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 高价值物资 TOP 5 / HIGH-VALUE ITEMS
        </div>
        <div class="asset-list">
            {{each solData.highPriceItems item}}
            <div class="asset-item">
                <div class="asset-img-box">
                    {{if item.imagePath}}
                    <img src="{{_res_path}}{{item.imagePath}}" alt="{{item.name}}" onerror="this.style.display='none';" />
                    {{/if}}
                </div>
                <div class="asset-info">
                    <div class="asset-name">{{item.name || '未知物品'}}</div>
                    <div class="asset-meta">
                        <span class="asset-price">{{item.price}}</span>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
    {{/if}}

    <!-- 干员使用详情 -->
    {{if solData.operators && solData.operators.length > 0}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 干员使用详情 / OPERATOR USAGE
        </div>
        <div class="operator-list">
            {{each solData.operators op}}
            <div class="operator-item">
                <div class="operator-img-box">
                    {{if op.imagePath}}
                    <img src="{{_res_path}}{{op.imagePath}}" alt="{{op.name}}" onerror="this.style.display='none';" />
                    {{/if}}
                </div>
                <div class="operator-info">
                    <div class="operator-name">{{op.name || '未知干员'}}</div>
                    <div class="operator-meta">使用场次: {{op.count}}场</div>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
    {{/if}}

    <!-- 地图使用详情 -->
    {{if solData.maps && solData.maps.length > 0}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 地图使用详情 / MAP USAGE
        </div>
        <div class="map-list">
            <div class="map-row">
                {{each solData.maps map}}
                <div class="map-card">
                    {{if map.imagePath}}
                    <img src="{{_res_path}}{{map.imagePath}}" class="map-bg" alt="{{map.name}}" onerror="this.style.display='none';" />
                    {{/if}}
                    <div class="map-content">
                        <div class="map-name">{{map.name || '未知地图'}}</div>
                        <div class="map-stats">对局: {{map.count}}场</div>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
    </div>
    {{/if}}

    <!-- 队友协作 -->
    {{if solData.teammates && solData.teammates.length > 0}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 队友协作 / TEAMMATES
        </div>
        <div class="teammate-list">
            {{each solData.teammates teammate}}
            <div class="teammate-item">
                <div class="teammate-avatar-box">
                    {{if teammate.avatar}}
                    <img src="{{teammate.avatar}}" alt="{{teammate.name}}" onerror="this.src='{{_res_path}}imgs/others/default_avatar.png'" />
                    {{/if}}
                </div>
                <div class="teammate-info">
                    <div class="teammate-name">{{teammate.name}}</div>
                    <div class="teammate-stats">
                        <div class="teammate-stat">对局: {{teammate.total_sol_num}} | 撤离: {{teammate.escape1}}</div>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
    {{/if}}

    <!-- 好友TOP10（烽火数据） -->
    {{if topFriends && topFriends.length > 0}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 好友TOP10（烽火地带） / FRIENDS TOP 10
        </div>
        <div class="teammate-list">
            {{each topFriends friend}}
            <div class="teammate-item" style="flex-direction: column; align-items: flex-start; padding: 20px;">
                <div style="display: flex; align-items: center; width: 100%; margin-bottom: 15px; gap: 20px;">
                    <div class="teammate-rank">{{friend.rank}}</div>
                    <div class="teammate-avatar-box" style="margin-right: 0;">
                        {{if friend.avatar}}
                        <img src="{{friend.avatar}}" alt="{{friend.name}}" onerror="this.src='{{_res_path}}imgs/others/default_avatar.png'" />
                        {{/if}}
                    </div>
                    <div class="teammate-info" style="flex: 1;">
                        <div class="teammate-name">{{friend.name}}</div>
                        <div class="teammate-stats">
                            <div class="teammate-stat" style="color: #0FF796; font-weight: 700;">总收益: {{friend.total_gained_price}} | 净收益: {{friend.total_GainedPrice}} | 最大单次: {{friend.max_GainedPrice}}</div>
                            <div class="teammate-stat">胜场: {{friend.win_num}} | 负场: {{friend.lose_num}} | 亲密度: {{friend.intimacy}}</div>
                        </div>
                    </div>
                </div>
                {{if friend.items && friend.items.length > 0}}
                <div style="width: 100%; margin-top: 10px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <div style="font-size: 20px; color: #0FF796; font-weight: 700; margin-bottom: 10px;">高价值物品 / HIGH-VALUE ITEMS</div>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        {{each friend.items item}}
                        <div style="display: flex; align-items: center; gap: 10px; background: rgba(15, 247, 150, 0.05); padding: 10px; border-radius: 4px; border: 1px solid rgba(15, 247, 150, 0.2);">
                            <div style="width: 60px; height: 60px; background: rgba(0,0,0,0.3); border-radius: 4px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; overflow: hidden;">
                                <img src="{{item.imageUrl}}" alt="{{item.name}}" style="max-width: 100%; max-height: 100%; object-fit: contain;" onerror="this.style.display='none';" />
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <div style="font-size: 22px; font-weight: 700; color: #FFFFFF;">{{item.name}}</div>
                                <div style="font-size: 18px; color: #0FF796; font-weight: 700;">{{item.price}}</div>
                                {{if item.inum > 1}}
                                <div style="font-size: 16px; color: rgba(255,255,255,0.7);">数量: {{item.inum}}</div>
                                {{/if}}
                            </div>
                        </div>
                        {{/each}}
                    </div>
                </div>
                {{/if}}
            </div>
            {{/each}}
        </div>
    </div>
    {{/if}}

    <!-- report1 - 烽火地带收益统计 -->
    {{if report1}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 烽火地带收益统计 / SOL REVENUE STATS
        </div>
        <div class="dashboard-grid asset-grid">
            <div class="data-node highlight asset-card">
                <div class="node-label">总出售价格 / TOTAL SELL PRICE</div>
                <span class="node-value large">{{report1.total_sell_price || 0}}</span>
            </div>
        </div>
    </div>
    {{/if}}
    {{/if}}

    {{if mpData && !mpData.isEmpty}}
    <!-- 全面战场数据看板 -->
    <div class="dashboard-section">
        <div class="dashboard-grid mp-grid">
            <div class="data-node highlight">
                <div class="node-label">总对局 / TOTAL MATCHES</div>
                <span class="node-value large">{{mpData.total_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">胜场 / VICTORIES</div>
                <span class="node-value large">{{mpData.win_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">胜率 / WIN RATE</div>
                <span class="node-value large">{{mpData.winRate || '0%'}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">段位 / RANK</div>
                <div class="rank-display">
                    {{if mpData.rankImagePath}}
                    <img src="{{_res_path}}{{mpData.rankImagePath}}" class="rank-img" alt="{{mpData.rankName}}" onerror="this.style.display='none';" />
                    {{/if}}
                    <span class="node-value">{{mpData.rankName || '-'}}</span>
                </div>
            </div>
            <div class="data-node highlight">
                <div class="node-label">击杀 / KILLS</div>
                <span class="node-value large">{{mpData.Kill_Num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高连杀 / MAX STREAK</div>
                <span class="node-value large">{{mpData.continuous_Kill_Num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">总分 / TOTAL SCORE</div>
                <span class="node-value large">{{mpData.total_score || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">命中率 / HIT RATE</div>
                <span class="node-value large">{{mpData.hitRate || '0%'}}</span>
                <div class="node-detail">({{mpData.Hit_Bullet_Num || 0}}/{{mpData.Consume_Bullet_Num || 0}})</div>
            </div>
            <div class="data-node highlight">
                <div class="node-label">支援呼叫 / SUPPORT CALLS</div>
                <span class="node-value">{{mpData.SBattle_Support_UseNum || 0}}次</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">支援消耗 / SUPPORT COST</div>
                <span class="node-value">{{mpData.SBattle_Support_CostScore || 0}}分</span>
            </div>
        </div>
    </div>

    <!-- 全面战场常玩内容 -->
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 常玩内容 / FAVORITE CONTENT
        </div>
        <div class="favorite-grid">
            {{if mpData.mostUsedMapImagePath}}
            <div class="favorite-card">
                <div class="favorite-bg" style="background-image: url('{{_res_path}}{{mpData.mostUsedMapImagePath}}');"></div>
                <div class="favorite-content">
                    <div class="favorite-label">常玩地图 / FAVORITE MAP</div>
                </div>
            </div>
            {{/if}}
            {{if mpData.mostUsedOperatorImagePath}}
            <div class="favorite-card">
                <div class="favorite-bg" style="background-image: url('{{_res_path}}{{mpData.mostUsedOperatorImagePath}}');"></div>
                <div class="favorite-content">
                    <div class="favorite-label">常玩干员 / FAVORITE OPERATOR</div>
                </div>
            </div>
            {{/if}}
        </div>
    </div>

    <!-- 全面战场地图使用详情 -->
    {{if mpData.maps && mpData.maps.length > 0}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 地图使用详情 / MAP USAGE
        </div>
        <div class="map-list">
            <div class="map-row">
                {{each mpData.maps map}}
                <div class="map-card">
                    {{if map.imagePath}}
                    <img src="{{_res_path}}{{map.imagePath}}" class="map-bg" alt="{{map.name}}" onerror="this.style.display='none';" />
                    {{/if}}
                    <div class="map-content">
                        <div class="map-name">{{map.name || '未知地图'}}</div>
                        <div class="map-stats">对局: {{map.count}}场</div>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
    </div>
    {{/if}}

    <!-- 全面战场队友协作 -->
    {{if mpData.teammates && mpData.teammates.length > 0}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 队友协作 / TEAMMATES
        </div>
        <div class="teammate-list">
            {{each mpData.teammates teammate}}
            <div class="teammate-item">
                <div class="teammate-avatar-box">
                    {{if teammate.avatar}}
                    <img src="{{teammate.avatar}}" alt="{{teammate.name}}" onerror="this.src='{{_res_path}}imgs/others/default_avatar.png'" />
                    {{/if}}
                </div>
                <div class="teammate-info">
                    <div class="teammate-name">{{teammate.name}}</div>
                    <div class="teammate-stats">
                        <div class="teammate-stat">总览: {{teammate.total_num}}场 | {{teammate.win_num}}胜 ({{teammate.winRate}})</div>
                        <div class="teammate-stat">KDA: {{teammate.kda}}</div>
                        <div class="teammate-stat">得分: {{teammate.sumScore}} (最高 {{teammate.maxScore}})</div>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
    {{/if}}

    <!-- report3 - 全面战场详细统计 -->
    {{if report3}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 全面战场详细统计 / MP DETAILED STATS
        </div>
        <div class="dashboard-grid">
            <div class="data-node highlight">
                <div class="node-label">最高对局数 / MAX MATCHES</div>
                <span class="node-value large">{{report3.max_mpmatch_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高载具使用时长 / MAX VEHICLE TIME</div>
                <span class="node-value">{{report3.max_vehicle_usedtime || '0'}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">总载具击杀 / TOTAL VEHICLE KILLS</div>
                <span class="node-value large">{{report3.total_killvehicle || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">总载具使用时长 / TOTAL VEHICLE TIME</div>
                <span class="node-value">{{report3.total_vehicle_usedtime || '0'}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">总载具使用次数 / TOTAL VEHICLE USES</div>
                <span class="node-value large">{{report3.total_vehicle_inum || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高分击杀数 / MAX SCORE KILLS</div>
                <span class="node-value large">{{report3.max_score_killnum || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高分死亡数 / MAX SCORE DEATHS</div>
                <span class="node-value large">{{report3.max_score_death || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">胜场数 / WINS</div>
                <span class="node-value large">{{report3.win_mpmatch_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高分助攻 / MAX SCORE ASSISTS</div>
                <span class="node-value large">{{report3.max_score_assist || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">总对局数 / TOTAL MATCHES</div>
                <span class="node-value large">{{report3.total_mpmatch_num || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高分地图 / MAX SCORE MAP</div>
                <span class="node-value">{{report3.max_score_mapid || '无'}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高对局救援数 / MAX RESCUES</div>
                <span class="node-value large">{{report3.max_mpmatch_num_Rescue || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高对局干员 / MAX OPERATOR</div>
                <span class="node-value">{{report3.max_mpmatch_num_deployarmedforcetype || '无'}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高分时间 / MAX SCORE TIME</div>
                <span class="node-value">{{report3.max_score_dteventtime || '-'}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">总击杀数 / TOTAL KILLS</div>
                <span class="node-value large">{{report3.total_killnum || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">总得分 / TOTAL SCORE</div>
                <span class="node-value large">{{report3.total_score || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高对局游戏时长 / MAX GAME TIME</div>
                <span class="node-value">{{report3.max_mpmatch_num_GameTime || '0'}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">总载具击杀数 / TOTAL VEHICLE KILLS</div>
                <span class="node-value large">{{report3.total_vehicle_killnum || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高载具击杀玩家数 / MAX VEHICLE KILLS</div>
                <span class="node-value large">{{report3.max_vehicle_usedtime_killplayer || 0}}</span>
            </div>
            <div class="data-node highlight">
                <div class="node-label">最高对局得分 / MAX MATCH SCORE</div>
                <span class="node-value large">{{report3.max_mpmatch_num_Score || 0}}</span>
            </div>
        </div>
    </div>
    {{/if}}

    <!-- report4 - 全面战场队友统计 -->
    {{if report4}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 全面战场队友统计 / MP TEAMMATE STATS
        </div>
        <div class="favorite-grid">
            {{if report4.best_teammate}}
            <div class="favorite-card">
                <div class="favorite-content">
                    <div class="favorite-label">最佳队友 / BEST TEAMMATE</div>
                    <div class="teammate-item" style="margin-top: 20px; background: rgba(15, 247, 150, 0.1);">
                        <div class="teammate-avatar-box">
                            {{if report4.best_teammate.avatar}}
                            <img src="{{report4.best_teammate.avatar}}" alt="{{report4.best_teammate.name}}" onerror="this.src='{{_res_path}}imgs/others/default_avatar.png'" />
                            {{/if}}
                        </div>
                        <div class="teammate-info">
                            <div class="teammate-name">{{report4.best_teammate.name}}</div>
                            <div class="teammate-stats">
                                <div class="teammate-stat">亲密度: {{report4.best_teammate.intimacy}} | 胜场: {{report4.best_teammate.win_num}} | 负场: {{report4.best_teammate.lose_num}}</div>
                                <div class="teammate-stat">击杀: {{report4.best_teammate.kill_num}} | 助攻: {{report4.best_teammate.assist}} | 得分: {{report4.best_teammate.score}}</div>
                                <div class="teammate-stat">常用干员: {{report4.best_teammate.operator}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{/if}}
            {{if report4.worst_teammate}}
            <div class="favorite-card">
                <div class="favorite-content">
                    <div class="favorite-label">最差队友 / WORST TEAMMATE</div>
                    <div class="teammate-item" style="margin-top: 20px; background: rgba(255, 0, 0, 0.1);">
                        <div class="teammate-avatar-box">
                            {{if report4.worst_teammate.avatar}}
                            <img src="{{report4.worst_teammate.avatar}}" alt="{{report4.worst_teammate.name}}" onerror="this.src='{{_res_path}}imgs/others/default_avatar.png'" />
                            {{/if}}
                        </div>
                        <div class="teammate-info">
                            <div class="teammate-name">{{report4.worst_teammate.name}}</div>
                            <div class="teammate-stats">
                                <div class="teammate-stat">亲密度: {{report4.worst_teammate.intimacy}} | 胜场: {{report4.worst_teammate.win_num}} | 负场: {{report4.worst_teammate.lose_num}}</div>
                                <div class="teammate-stat">击杀: {{report4.worst_teammate.kill_num}} | 助攻: {{report4.worst_teammate.assist}} | 得分: {{report4.worst_teammate.score}}</div>
                                <div class="teammate-stat">常用干员: {{report4.worst_teammate.operator}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{/if}}
        </div>
    </div>
    {{/if}}

    <!-- bk - 全面战场载具统计 -->
    {{if bk && bk.vehicles && bk.vehicles.length > 0}}
    <div class="section-block">
        <div class="section-header">
            <span class="dot"></span> 全面战场载具统计 / MP VEHICLE STATS
        </div>
        <div class="dashboard-grid asset-grid">
            <div class="data-node highlight asset-card">
                <div class="node-label">平均得分 / AVG SCORE</div>
                <span class="node-value large">{{bk.avg_score || '0'}}</span>
            </div>
            <div class="data-node highlight asset-card">
                <div class="node-label">支援呼叫次数 / SUPPORT CALLS</div>
                <span class="node-value large">{{bk.support_count || 0}}</span>
            </div>
        </div>
        <div class="map-list" style="margin-top: 30px;">
            <div class="section-header" style="font-size: 28px; margin-bottom: 20px;">
                <span class="dot"></span> 载具使用排行 / VEHICLE USAGE RANKING
            </div>
            <div class="map-row">
                {{each bk.vehicles vehicle}}
                <div class="map-card">
                    <div class="map-content">
                        <div class="map-name">{{vehicle.vehicle_name}}</div>
                        <div class="map-stats">使用次数: {{vehicle.inum}}次</div>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
    </div>
    {{/if}}
    {{/if}}

</div>
{{/block}}
{{block 'footer'}}
{{/block}}
